<main @name="app">
  <filelist />
  <editor />
  <viewer />
</main>


<section @name="filelist">
  <div>
    <button @click="openDir">Open project root</button>
  </div>
  <nav>
    <listing />
  </nav>

  <script>
    dirList = []
    openDir() {
      showDirectoryPicker({ mode: 'readwrite', startIn: 'documents' }).then((r) => {
        console.log(r)
      })
    }
  </script>
</section>


<section @name="editor">
  <textarea></textarea>
</section>


<section @name="viewer">
  <form @submit.prevent="openUrl">
    <input type="url" id="urlbar" :value="url">
    <button>Open</button>
  </form>
  <iframe :src="url" frameborder="0" id="webview"></iframe>

  <script>
    urlbar = document.getElementById('urlbar')

    openUrl() {
      this.url = urlbar.value
    }

    constructor({ origin="http://localhost:8080", pth='' }) {
      this.url = new URL(pth, origin).toString()
      addEventListener('message', ({data}) => urlbar.value = data)
    }
  </script>
</section>


<li @name="listing">

</li>
